import{r as p,j as e,S as v,u as Y,a as f,p as P}from"./index-OisYFWKl.js";import{u as D}from"./useRequest-Li-w0A1D.js";import{u as S,P as C,A as h,a as I,b as k,c as z}from"./index-MNAzSTJf.js";import{e as R,h as d}from"./moment-hThDMLa-.js";import{u as T}from"./useIgnore-1jXMKp_Z.js";import{a as L,C as A}from"./index.esm-yfRco9Pw.js";import{a as q}from"./index-glH2v6lq.js";import{u as F}from"./useMemoryClick-nF3JUHnP.js";import{D as M}from"./index-JtI0AH6f.js";import"./isObjectLike-Yl_qYfeg.js";import"./v4-yQnnJER4.js";const B=({sorting:s,column:a,sortTable:r})=>{const t=s.column===a&&s.order==="desc";return e.jsx("td",{className:"font-[500] min-w-[95px]",onClick:()=>{r(t?{column:a,order:"asc"}:{column:a,order:"desc"})},children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{children:[" ",a]}),e.jsxs("div",{className:"w-full text-right opacity-0 hover:opacity-100 transition-all duration-300 ease-in-out",children:[e.jsx("span",{className:"inline-block ",children:e.jsx(h,{})}),e.jsx("span",{className:`mr-2 inline-block transition-all ease-in-out duration-300 ${t?"rotate-[180deg] opacity-100":"opacity-0"}`,children:e.jsx(h,{})})]})]})})},a)},E=({columns:s,sorting:a,sortTable:r})=>e.jsx("thead",{className:"capitalize",children:e.jsx("tr",{className:"  border-b text-left whitespace-nowrap  h-[50px] text-[14px] font-[700]",children:s.map(t=>e.jsx(B,{sorting:a,sortTable:r,column:t},t))})}),H=({entries:s})=>e.jsx("tbody",{className:"text-[13px]",children:e.jsxs("tr",{className:"border-b h-[50px] capitalize text-left",children:[e.jsx("td",{children:1}),e.jsx("td",{children:s==null?void 0:s.total_users}),e.jsxs("td",{children:[s==null?void 0:s.yearly_income," Ks"]})]})}),K=({loading:s,data:a})=>{const r=["No","Total Users","Total Incomes"],[t,n]=F({column:"no",order:"asc"}),c=p.useRef(null),m=q(c),{data:u}={...a},{data:i}={...u},{recordPerPage:x,getPaginatedData:l,goToNextPage:o,changePage:j,paginationRange:y,pageNumbersCount:g,currentPage:b,goToPreviousPage:N,setRecordPerPage:w}=S(M);return e.jsxs("div",{className:"w-full bg-white px-5 pt-5 overflow-x-scroll  pb-10 relative min-h-[160px] rounded-md shadow-sm  cursor-pointer",children:[e.jsxs("div",{className:"w-full overflow-x-scroll ",children:[s&&e.jsxs("div",{style:m,className:"absolute bg-[#ffffff50]   top-0 left-0 w-full h-full z-[60] flex justify-center items-center",children:[e.jsx(v,{width:24,height:24}),e.jsx("div",{className:"absolute top-0 left-0 w-full bg-[#ffffff50] z-50  blur-[20px] h-full  flex justify-center items-center"})]}),!i&&!s&&e.jsx("div",{className:"absolute top-0 left-0 w-full  h-[180px]  flex justify-center items-center",children:e.jsx("p",{children:"No Data"})}),e.jsxs("table",{className:"w-full h-full",children:[e.jsx(E,{columns:r,sorting:t,sortTable:n}),i&&e.jsx(H,{entries:i})]})]}),e.jsx("div",{className:"absolute w-full bottom-0 left-0 px-4 ",children:e.jsx(C,{recordPerPage:x,currentPage:b,getPaginatedData:l,goToNextPage:o,goToPreviousPage:N,changePage:j,paginationRange:y,pageNumbersCount:g,setRecordPerPage:w})})]})},O=({loading:s,data:a})=>{const[r,t]=p.useState(new Date),{handleMass:n}=T(l=>l),c=Y(),{control:m,reset:u,handleSubmit:i}=L({defaultValues:{year:""}}),x=l=>{const o=l.year?d(l.year).format("YYYY"):d(new Date).format("YYYY");c(location.pathname+"?date="+o)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsxs("form",{onSubmit:i(x),className:" flex items-center  gap-3",children:[e.jsxs("div",{className:" ",children:[e.jsx("p",{className:"text-sm mb-1",children:"Yearly"}),e.jsx(A,{name:"year",control:m,render:({field:{onChange:l}})=>e.jsx(R,{selected:r,onChange:o=>{n(o),t(o),l(o)},startDate:r,dateFormat:"yyyy",showYearPicker:!0,className:"rounded-md  bg-[#efefef] px-3 py-2 "})})]}),e.jsx(f.Button,{type:"submit",placeholder:"search",className:"capitalize mt-6 shadow-none rounded-md",color:"blue",children:"Search"}),e.jsx(f.Button,{onClick:()=>{u(),setTimeout(()=>{c(location.pathname+"?date="+d(new Date).format("YYYY"))},100),t(new Date)},placeholder:"Reset",className:"capitalize mt-6 shadow-none rounded-md",color:"black",children:"Reset"})]})}),e.jsx(K,{loading:s,data:a})]})},Q=()=>{const a=I().get("date"),{loading:r,data:t,runAsync:n}=D(P,{manual:!0});return k(()=>{const c=d(new Date).format("YYYY");n({year:c})}),z(()=>{a&&n({year:a})},[a]),e.jsx("div",{className:"px-6 pt-6",children:e.jsx(O,{loading:r,data:t})})},U=()=>e.jsx("div",{children:e.jsx(Q,{})}),te=()=>e.jsx("div",{children:e.jsx(U,{})});export{te as default};
