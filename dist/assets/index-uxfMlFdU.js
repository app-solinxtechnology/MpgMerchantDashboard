import{r as p,j as e,S as v,u as M,a as x,o as P}from"./index-UUOBTXoH.js";import{u as D}from"./useRequest-8cKQC8vy.js";import{u as S,P as C,A as f,a as I,b as k,c as z}from"./index-o7kaHHbJ.js";import{e as R,h as d}from"./moment-ZltPV0us.js";import{u as T}from"./useIgnore-7r5u294N.js";import{a as A,C as L}from"./index.esm-AaaHinrt.js";import{a as q}from"./index-UTz7hxLP.js";import{u as F}from"./useMemoryClick-RVGU509t.js";import"./isObjectLike-xbFlPWQQ.js";const H=({sorting:s,column:t,sortTable:o})=>{const a=s.column===t&&s.order==="desc";return e.jsx("td",{className:"font-[500] min-w-[95px]",onClick:()=>{o(a?{column:t,order:"asc"}:{column:t,order:"desc"})},children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{children:[" ",t]}),e.jsxs("div",{className:"w-full text-right opacity-0 hover:opacity-100 transition-all duration-300 ease-in-out",children:[e.jsx("span",{className:"inline-block ",children:e.jsx(f,{})}),e.jsx("span",{className:`mr-2 inline-block transition-all ease-in-out duration-300 ${a?"rotate-[180deg] opacity-100":"opacity-0"}`,children:e.jsx(f,{})})]})]})})},t)},B=({columns:s,sorting:t,sortTable:o})=>e.jsx("thead",{className:"capitalize",children:e.jsx("tr",{className:"  border-b text-left whitespace-nowrap  h-[50px] text-[14px] font-[700]",children:s.map(a=>e.jsx(H,{sorting:t,sortTable:o,column:a},a))})}),E=({entries:s})=>e.jsx("tbody",{className:"text-[13px]",children:e.jsxs("tr",{className:"border-b h-[50px] capitalize text-left",children:[e.jsx("td",{children:1}),e.jsx("td",{children:s==null?void 0:s.total_users}),e.jsxs("td",{children:[s==null?void 0:s.monthly_income," Ks"]})]})}),K=({loading:s,data:t})=>{const o=["No","Total Users","Total Incomes"],[a,r]=F({column:"no",order:"asc"}),c=p.useRef(null),m=q(c),{data:u}={...t},{data:i}={...u},{getPaginatedData:h,recordPerPage:l,goToNextPage:n,changePage:j,paginationRange:g,pageNumbersCount:b,currentPage:N,goToPreviousPage:w,setRecordPerPage:y}=S(1);return e.jsxs("div",{className:"w-full bg-white  px-5 pt-5 overflow-x-scroll  pb-10 relative min-h-[160px]  rounded-md shadow-sm  cursor-pointer",children:[e.jsxs("div",{className:"w-full overflow-x-scroll ",children:[s&&e.jsxs("div",{style:m,className:"absolute bg-[#ffffff50]   top-0 left-0 w-full h-full z-[60] flex justify-center items-center",children:[e.jsx(v,{width:24,height:24}),e.jsx("div",{className:"absolute top-0 left-0 w-full bg-[#ffffff50] z-50  blur-[20px] h-full  flex justify-center items-center"})]}),!i&&!s&&e.jsx("div",{className:"absolute top-0 left-0 w-full  h-[180px]  flex justify-center items-center",children:e.jsx("p",{children:"No Data"})}),e.jsxs("table",{className:"w-full h-full",children:[e.jsx(B,{columns:o,sorting:a,sortTable:r}),i&&e.jsx(E,{entries:i})]})]}),e.jsx("div",{className:"absolute w-full bottom-0 left-0 px-4 ",children:e.jsx(C,{recordPerPage:l,currentPage:N,getPaginatedData:h,goToNextPage:n,goToPreviousPage:w,changePage:j,paginationRange:g,pageNumbersCount:b,setRecordPerPage:y})})]})},O=({loading:s,data:t})=>{const[o,a]=p.useState(new Date),{handleMass:r}=T(l=>l),c=M(),{control:m,reset:u,handleSubmit:i}=A({mode:"all",defaultValues:{month:""}}),h=l=>{const n=l.month?d(l.month).format("MM"):d(new Date).format("MM");c(location.pathname+"?date="+n)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsxs("form",{onSubmit:i(h),className:" flex items-center  gap-3",children:[e.jsxs("div",{className:" ",children:[e.jsx("p",{className:"text-sm mb-1",children:"Monthly"}),e.jsx(L,{name:"month",control:m,render:({field:{onChange:l}})=>e.jsx(R,{selected:o,maxDate:d().toDate(),onChange:n=>{r(n),a(n),l(n)},dateFormat:"MM",renderCustomHeader:n=>e.jsx("div",{...n,className:"hidden",children:"span"}),showMonthYearPicker:!0,className:"rounded-md bg-[#efefef] px-3 py-2 "})})]}),e.jsx(x.Button,{type:"submit",placeholder:"search",className:"capitalize mt-6 shadow-none rounded-md",color:"blue",children:"Search"}),e.jsx(x.Button,{onClick:()=>{u(),setTimeout(()=>{c(location.pathname+"?date="+d(new Date).format("MM"))},100),a(new Date)},placeholder:"Reset",className:"capitalize mt-6 shadow-none rounded-md",color:"black",children:"Reset"})]})}),e.jsx(K,{loading:s,data:t})]})},Q=()=>{const t=I().get("date"),{loading:o,data:a,runAsync:r}=D(P,{manual:!0});return k(()=>{const c=d(new Date).format("MM");r({month:c})}),z(()=>{t&&r({month:t})},[t]),e.jsx("div",{className:"px-6 pt-6",children:e.jsx(O,{loading:o,data:a})})},U=()=>e.jsx("div",{children:e.jsx(Q,{})}),ee=()=>e.jsx("div",{children:e.jsx(U,{})});export{ee as default};
