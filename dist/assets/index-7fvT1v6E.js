import{r as b,j as e,S as q,u as D,a as C,b as z,k as A}from"./index-RTcrJTtN.js";import{u as R}from"./useRequest-WcwHmvol.js";import{u as F,P as T,A as P,a as S,b as L,c as O}from"./index-e7YC-jXP.js";import{h as f,e as H}from"./moment-2fL2aAHf.js";import{I as B}from"./intex-yw1bxWau.js";import{a as E,C as Q}from"./index.esm-gxvAo-Bb.js";import{u as _}from"./useMemoryClick-f1HGAU4R.js";import{C as U}from"./Create-S3SSQDqY.js";import{u as V}from"./useIgnore-2ypH8qDZ.js";import{a as Y}from"./index-sn78rki_.js";import"./isObjectLike-EOxst829.js";import"./index-kW5jgzg5.js";const $=({sorting:n,column:t,sortTable:s})=>{const a=n.column===t&&n.order==="desc";return e.jsx("td",{className:"font-[500] min-w-[95px]",onClick:()=>{s(a?{column:t,order:"asc"}:{column:t,order:"desc"})},children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{children:[" ",t]}),e.jsxs("div",{className:"w-full text-right opacity-0 hover:opacity-100 transition-all duration-300 ease-in-out",children:[e.jsx("span",{className:"inline-block ",children:e.jsx(P,{})}),e.jsx("span",{className:`mr-2 inline-block transition-all ease-in-out duration-300 ${a?"rotate-[180deg] opacity-100":"opacity-0"}`,children:e.jsx(P,{})})]})]})})},t)},G=({columns:n,sorting:t,sortTable:s})=>e.jsx("thead",{className:"capitalize",children:e.jsx("tr",{className:"  border-b text-left whitespace-nowrap  h-[50px] text-[14px] font-[700]",children:n.map(a=>e.jsx($,{sorting:t,sortTable:s,column:a},a))})}),J=({entries:n})=>e.jsx("tbody",{className:"text-[13px]",children:n==null?void 0:n.map((t,s)=>e.jsxs("tr",{className:"border-b h-[70px] capitalize text-left",children:[e.jsx("td",{children:t.no}),e.jsx("td",{className:"min-w-[160px]",children:f(t.transactionDate).format("lll")}),e.jsx("td",{className:"min-w-[160px]",children:t.transactionId}),e.jsx("td",{className:"min-w-[150px]",children:t.fullname||"Delete user account"}),e.jsx("td",{className:"min-w-[180px]",children:t.merchantName}),e.jsx("td",{children:t.amount}),e.jsx("td",{children:t.actualAmount}),e.jsx("td",{children:t.transactionFees}),e.jsx("td",{children:t.paymentChannelName}),e.jsx("td",{children:t.transaction_status})]},s))}),K=({loading:n,data:t})=>{const s=["no","Date","Transaction Id","name","Connected Merchants","Amount","Actual_amount","Transaction Fee","Payment Method","Payment Status"],[a,o]=_({column:"no",order:"asc"}),m=b.useRef(null),u=Y(m),{data:h}={...t},{data:d}={...h},{result:r=[],total:x=0}={...d},p=r.map((l,I)=>({no:I+1,transactionId:l.transaction_id,fullname:l.fullname,merchantName:l.merchant_name,merchantUserId:l.merchant_user_id,paymentChannelName:l.payment_channel_name,amount:l.amount,transactionFees:l.transaction_fees,transactionPercentage:l.transaction_percentage,actualAmount:l.actual_amount,transaction_status:l.transaction_status,transactionDate:l.transaction_date})),{recordPerPage:w,getPaginatedData:j,goToNextPage:v,changePage:g,paginationRange:y,pageNumbersCount:c,currentPage:i,goToPreviousPage:N,setRecordPerPage:k}=F(x),M=b.useMemo(()=>{if(a.order==="desc")return p.reverse();if(a.order=="asc")return p},[a.order,g]);return e.jsxs("div",{ref:m,className:"w-full bg-white px-5 pt-5 overflow-x-scroll  pb-10 relative min-h-[300px]  rounded-md shadow-sm  cursor-pointer",children:[e.jsxs("div",{className:"w-full overflow-x-scroll min-h-[300px] ",children:[n&&e.jsxs("div",{style:u,className:"absolute bg-[#ffffff50]   top-0 left-0 w-full h-full z-[60] flex justify-center items-center",children:[e.jsx(q,{width:24,height:24}),e.jsx("div",{className:"absolute top-0 left-0 w-full bg-[#ffffff50] z-50  blur-[20px] h-full  flex justify-center items-center"})]}),M.length==0&&!n&&e.jsx("div",{style:u,className:"absolute top-0 left-0 w-full  h-full  flex justify-center items-center",children:e.jsx("p",{children:"No Data"})}),e.jsxs("table",{className:"w-full h-full",children:[e.jsx(G,{columns:s,sorting:a,sortTable:o}),M.length!==0&&e.jsx(J,{entries:M})]})]}),e.jsx("div",{className:"absolute w-full bottom-0 left-0 px-4 ",children:e.jsx(T,{recordPerPage:w,currentPage:i,getPaginatedData:j,goToNextPage:v,goToPreviousPage:N,changePage:g,paginationRange:y,pageNumbersCount:c,setRecordPerPage:k})})]})},W=({loading:n,data:t})=>{const[s,a]=b.useState(new Date),{handleMass:o}=V(),m=D(),u=S(),h=u.get("date"),d=u.get("limit"),{control:r,handleSubmit:x,reset:p}=E({mode:"all",defaultValues:{user:"",month:""}}),[w,j]=_(!1),v=b.useCallback(()=>{j(c=>!c)},[]),g=()=>{j(!1)},y=c=>{const i=f(c.month).format("MM"),N=d||"5";h===f(s).format("MM")?m(location.pathname+"?date="+h+"&q="+c.user+"&page=1&limit="+N):m(location.pathname+"?date="+i+"&q="+c.user+"&page=1&limit="+N)};return e.jsxs("div",{children:[e.jsx(U,{handleOpen:v,handleClose:g,open:w}),e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsxs("form",{onSubmit:x(y),className:" flex items-center  gap-3",children:[e.jsx(B,{className:"max-w-[250px] ",label:"Search",name:"user",control:r}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm",children:"Monthly"}),e.jsx(Q,{name:"month",control:r,render:({field:{onChange:c}})=>e.jsx(H,{selected:s,maxDate:f().toDate(),onChange:i=>{o(i),a(i),c(i)},dateFormat:"MM",renderCustomHeader:i=>e.jsx("div",{...i,className:"hidden",children:"span"}),showMonthYearPicker:!0,className:"rounded-md bg-[#efefef] px-3 py-2 "})})]}),e.jsx(C.Button,{type:"submit",placeholder:"search",className:"capitalize mt-6 shadow-none rounded-md",color:"blue",children:"Search"}),e.jsx(C.Button,{onClick:()=>{p();const c=d||"5";setTimeout(()=>{m(location.pathname+"?date="+f(new Date).format("MM")+"&page=1&limit="+c+"&q=")},100),a(new Date)},placeholder:"Reset",className:"capitalize mt-6 shadow-none rounded-md",color:"black",children:"Reset"})]})}),e.jsx(K,{loading:n,data:t})]})},X=()=>{const n=S(),t=n.get("page"),s=n.get("limit"),a=n.get("q"),o=n.get("date"),m=D(),u=z(),{loading:h,data:d,runAsync:r}=R(A,{manual:!0});return L(()=>{const x=f(new Date).format("MM");m(u.pathname+"?date="+x),r({month:x,limit:s||"5"})}),console.log("q",!!a),O(()=>{a?a&&o&&r({q:a,limit:s||"5",page:t,month:o}):s&&t&&o&&!a?r({limit:s,page:t,month:o}):s&&t&&o&&a?r({limit:s,page:t,month:o,q:a}):o&&a?r({month:o,q:a}):a&&r({q:a})},[t,s,a,o]),e.jsx("div",{className:"px-6 pt-6",children:e.jsx(W,{loading:h,data:d})})},Z=()=>e.jsx("div",{children:e.jsx(X,{})}),ue=()=>e.jsx(Z,{});export{ue as default};
