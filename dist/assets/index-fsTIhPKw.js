import{R as w,r as x,j as e,u as b,a as j,L as N}from"./index-RTcrJTtN.js";import{E as y,a as v}from"./index-kW5jgzg5.js";import{u as S,a as E}from"./index.esm-gxvAo-Bb.js";import{u as k}from"./useRequest-WcwHmvol.js";import{z as u,t as L,l as P}from"./zod-vGt3jo9X.js";import{e as R}from"./index-JtI0AH6f.js";import"./isObjectLike-EOxst829.js";import"./v4-yQnnJER4.js";const f=w.memo(({className:o,label:l,password:r=!1,name:d,type:p,message:a,control:c,...t})=>{const{field:n}=S({name:d,control:c});let i=!r;const[s,m]=x.useState(i),g=x.useCallback(()=>{m(h=>!h)},[]);return e.jsxs("div",{className:"mb-1 grow",children:[e.jsxs("div",{children:[l&&e.jsx("label",{className:` ${a&&"text-red-600"} text-[14px]  inline-block mb-1 `,children:l}),e.jsxs("div",{className:`flex h-10 w-full rounded-md outline-none ${a&&"border border-red-500"}  border-input bg-[#efefef] grow px-3 py-2 text-sm ${o}`,children:[e.jsx("input",{...n,type:s?"text":"password",className:"outline-none w-full h-full bg-[#efefef]",...t}),r&&e.jsx("span",{className:"inline-block mt-[6px]",onClick:g,children:s?e.jsx(y,{}):e.jsx(v,{})})]})]}),a&&e.jsx("p",{className:"text-xs  text-red-500",children:a})]})}),C=u.object({email:u.string().min(1,{message:"email is required"}).email("Invalid email (example : username@gmail.com)"),password:u.string().min(1,{message:"password is required"})}),M=()=>{var t,n;const{control:o,handleSubmit:l,formState:{errors:r}}=E({mode:"onChange",resolver:L(C),defaultValues:{password:"",email:""}}),d=b(),{loading:p,runAsync:a}=k(N,{manual:!0}),c=async i=>{P(a({email:i.email,password:i.password}),{loading:"verifying",success:s=>{var m;return localStorage.setItem("merchantToken",s.data.data.accessToken),d("/dashboard"),(m=s==null?void 0:s.data)==null?void 0:m.message},error:s=>R(s)})};return e.jsx("main",{className:"flex h-screen items-center  w-full justify-center ",children:e.jsxs("div",{children:[e.jsx("p",{className:" mb-1",children:"Accont Login"}),e.jsxs("div",{className:" bg-white border-[3px] p-8 w-[380px] rounded-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/mpg-logo.png",className:"w-auto max-h-[90px] rounded-full",alt:""})}),e.jsxs("form",{className:" gap-6",onSubmit:l(c),children:[e.jsx(f,{message:(t=r.email)==null?void 0:t.message,label:"Email",placeholder:"Enter your username",className:"w-96  ",name:"email",control:o}),e.jsx(f,{label:"Password",message:(n=r.password)==null?void 0:n.message,placeholder:"Enter your password",className:"w-96  border-grey border-[1px]",password:!0,name:"password",control:o}),e.jsx(j.Button,{disabled:p,type:"submit",placeholder:"button",className:"bg-[#3a86ff] mt-2 w-full ",children:"Sign In"})]})]})]})})};export{M as default};
